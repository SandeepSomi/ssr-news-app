(this["webpackJsonpnews-app-ssr"]=this["webpackJsonpnews-app-ssr"]||[]).push([[0],{197:function(e,t,n){},198:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(29),o=n.n(c),i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var l=n(6),u=n(21),d=n(47),f=n(2),h=n(14),p=n.n(h),m=n(22),b=n(74),g=n.n(b);function E(e){return"http://hn.algolia.com/api/v1"+e}function v(e,t,n,a){return new Promise((function(r,c){a=Object(f.a)({},a),"get"!==n&&"delete"!==n||(t={params:t,headers:a}),g.a[n](e,t,{headers:a}).then((function(e){var t=e.data;return!1===t.status?c(t):r(t)})).catch((function(e){return c(e)}))}))}function w(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return v(E(e),t,"get",n)}("/search",e)}var j=new(n(75).a)("news-app");j.version(1).stores({hits:"++id, objectID"});var S=j;function O(e,t){return y.apply(this,arguments)}function y(){return(y=Object(m.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach((function(e){S.hits.put(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(m.a)(p.a.mark((function e(t){var n,a,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.page,a=t.hitsPerPage,r=n?n*a:n,e.next=4,S.hits.offset(r).limit(a).toArray();case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.hits.get({objectID:t});case 2:return n=e.sent,e.next=5,S.hits.update(n.id,{isHidden:!0});case 5:e.sent?console.log("db has been updated"):console.error("something went wrong!");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.hits.get({objectID:t});case 2:return n=e.sent,e.next=5,S.hits.update(n.id,{votes:n.votes+1});case 5:e.sent?console.log("db has been updated"):console.error("something went wrong!");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return function(t){return t({type:"SEARCH_INITIATED"}),new Promise((function(n,a){(function(e){return P.apply(this,arguments)})(e).then((function(r){if(r&&r.length)return t({type:"SEARCH_WAS_SUCCESSFUL",data:{page:e.page,hitsPerPage:e.hitsPerPage,hits:r}}),n({hits:r});w(e).then((function(e){return t({type:"SEARCH_WAS_SUCCESSFUL",data:Object(f.a)(Object(f.a)({},e),{},{hits:I(e.hits)})}),n(e)})).then((function(e){return t({type:"SEARCH_WAS_UNSUCCESSFUL"}),a(e)}))}))}))}}function A(e){return function(e){C.apply(this,arguments)}(e),function(t){t({type:"HIDE_NEWS_ITEM",objectID:e})}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e&&e.length&&e.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{votes:parseInt(999*Math.random()+1),isHidden:!1})}))}function N(e){return function(e){_.apply(this,arguments)}(e),function(t){t({type:"UPVOTE",objectID:e})}}var x={isLoading:!1,hits:[],hitsPerPage:30,page:0,nbPages:null,bookmarks:[],hidden:[]},D=n(8),U=Object(D.c)({main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(f.a)({},x),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_INITIATED":return Object(f.a)(Object(f.a)({},e),{},{isLoading:!0});case"SEARCH_WAS_SUCCESSFUL":var n=t.data,a=n.hits,r=n.hitsPerPage,c=n.page,o=n.nbPages;return O(a),Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,hits:a,hitsPerPage:r,page:c,nbPages:o});case"SEARCH_WAS_UNSUCCESSFUL":return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1});case"HIDE_NEWS_ITEM":var i=t.objectID,s=e.hits.findIndex((function(e){return e.objectID===i})),l=Object(d.a)(e.hits);return l[s]=Object(f.a)(Object(f.a)({},l[s]),{},{isHidden:!0}),Object(f.a)(Object(f.a)({},e),{},{hits:l});case"UPVOTE":var u=Object(d.a)(e.hits),h=e.hits.findIndex((function(e){return e.objectID===t.objectID}));return u[h]=Object(f.a)(Object(f.a)({},u[h]),{},{votes:u[h].votes&&u[h].votes+1||1}),Object(f.a)(Object(f.a)({},e),{},{hits:u});default:return e}}}),L=n(79),W=n(4),H=n(78),R=n(42),T=n.n(R),F=n(44),B=n.n(F),V=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.main.page})),n=Object(l.c)((function(e){return e.main.nbPages})),a=Object(l.c)((function(e){return e.main.hitsPerPage})),c=Object(l.c)((function(e){return e.main.hits}));function o(t){if(t<0||t>n)return null;e(k({page:t,hitsPerPage:a}))}return r.a.createElement("div",{className:"news-table-wrapper"},r.a.createElement("table",{id:"news-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Comments"),r.a.createElement("th",null,"Vote Count"),r.a.createElement("th",null,"UpVote"),r.a.createElement("th",null,"NewsDetail"))),r.a.createElement("tbody",null,c.map((function(t,n){var a=t.title,c=t.num_comments,o=t.author,i=t.created_at,s=t.objectID,l=t.url,u=t.votes,d=void 0===u?0:u,f=t.isHidden;if(void 0!==f&&f)return null;var h=l&&l.split("/")[2]||"";return r.a.createElement("tr",{key:s||n},r.a.createElement("td",null,c),r.a.createElement("td",null,d),r.a.createElement("td",null,r.a.createElement("span",{onClick:function(){return function(t){e(N(t))}(s)}},r.a.createElement("i",{className:"fas fa-arrow-alt-circle-up"}))),r.a.createElement("td",null,a,h?r.a.createElement("span",null,r.a.createElement("a",{href:l,target:"_blank"},"(",h,")")):null,r.a.createElement("span",{className:"news-by"},"by"),r.a.createElement("span",null,o),r.a.createElement("span",{className:"posted"},T()(i).fromNow(!0)),r.a.createElement("span",{className:"hide-action",onClick:function(){return function(t){e(A(t))}(s)}},"[ hide ]")))}))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},r.a.createElement("span",{className:"float-left"},t+1),r.a.createElement("span",{className:B()({disabled:t<=0}),onClick:function(){return o(t-1)}},"Previous")," | ",r.a.createElement("span",{className:B()({disabled:t>=n}),onClick:function(){return o(t+1)}},"Next"))))))},M=n(76),z=function(){var e=Object(l.c)((function(e){return e.main.hits.filter((function(e){return!e.isHidden}))})),t=e&&e.length&&e.map((function(e){return e.objectID})),n=e&&e.length&&e.map((function(e){return e.votes}));return r.a.createElement("div",{className:"chart-container"},r.a.createElement(M.a,{data:{labels:t,datasets:[{borderWidth:2,borderColor:"#007BFF",pointBackgroundColor:"#007BFF",data:n,fill:!1}]},height:300,options:{maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0,autoSkip:!1,stepSize:250},scaleLabel:{display:!0,labelString:"Votes",fontStyle:"bold",fontColor:"#000",fontSize:14}}],xAxes:[{gridLines:{display:!1},ticks:{autoSkip:!1,maxRotation:90,minRotation:90},scaleLabel:{display:!0,labelString:"ID",fontStyle:"bold",fontColor:"#000",fontSize:14}}]},elements:{line:{tension:0}}}}))},J=function(){var e=Object(l.c)((function(e){return e.main.page})),t=Object(l.c)((function(e){return e.main.hitsPerPage})),n=Object(l.b)();return Object(a.useEffect)((function(){n(k({hitsPerPage:t,page:e}))}),[]),r.a.createElement("div",{className:"container p-0"},r.a.createElement(V,null),r.a.createElement(z,null))},Z=function(e){return e.children},$=function(){return r.a.createElement(Z,null,r.a.createElement(W.c,null,r.a.createElement(W.d,null,r.a.createElement(W.a,{exact:!0,path:"/",component:J}),r.a.createElement(W.a,{component:q}))))};function q(){return r.a.createElement("div",{className:"vh-100 d-flex justify-content-center align-items-center"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h4",{className:"text-secondary"},"Page Not Found!"),r.a.createElement(H.a,{to:"/"},"Home")))}n(197);var G=window.__PRELOADED_STATE__;delete window.__PRELOADED_STATE__;var K,Q=(K=G,Object(L.a)({reducer:U,middleware:[u.a],preloadedState:K}));o.a.hydrate(r.a.createElement(l.a,{store:Q},r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");i?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}()},80:function(e,t,n){e.exports=n(198)}},[[80,1,2]]]);
//# sourceMappingURL=main.5a6497cc.chunk.js.map